<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>风车王国</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="life is like a boat.">
<meta property="og:type" content="website">
<meta property="og:title" content="风车王国">
<meta property="og:url" content="http://clz619.github.io/page/6/index.html">
<meta property="og:site_name" content="风车王国">
<meta property="og:description" content="life is like a boat.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="风车王国">
<meta name="twitter:description" content="life is like a boat.">
  
    <link rel="alternative" href="/atom.xml" title="风车王国" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.png">
  
  <script src="/style.js"></script>
</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://7xk5y4.com1.z0.glb.clouddn.com/1D696117-FDBC-48A3-B5D7-112470523AAA.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">lizhong.chen</a></h1>
		</hgroup>

		
		<p class="header-subtitle">每天进步一点点</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/忠忠闲谈">忠忠闲谈</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/clz619" title="github">github</a>
		        
					<a class="mail" target="_blank" href="mailto:admin@chenlizhong.cn" title="mail">mail</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">lizhong.chen</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://7xk5y4.com1.z0.glb.clouddn.com/1D696117-FDBC-48A3-B5D7-112470523AAA.jpg" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">lizhong.chen</h1>
			</hgroup>
			
			<p class="header-subtitle">每天进步一点点</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/tags/忠忠闲谈">忠忠闲谈</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/clz619" title="github">github</a>
			        
						<a class="mail" target="_blank" href="mailto:admin@chenlizhong.cn" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-solr搜索解析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/01/solr搜索解析/">solr搜索解析sdk</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.背景<br>最近在做公司的公共服务项目，包括将所有产品除业务外的所有需求功能（数据分析、监控、其它服务），有些接口需要涉及的条件参数，非常多，关联表也很多。不计算关联表的分表，大概有10几张业务独立表，涉及的数据量也就更大了。</p>
<p>光用mysql去关联查询，速度是非常慢的，要3-5秒。</p>
<p>有些需要提供给内部人员用的数据，还好数据及时度要求不高，可以接受1小时延迟。</p>
<p>2.解决方案<br>还好有对于处理几亿数据，1秒内响应完成的经验，这点小case完全没问题。</p>
<p>因为及时度要求不高，那么将数据迁移到solr做层索引，再从solr进行获取就好了。<br>因为参数会变更，且数量特别多有100多个，对于懒惰的程序猿来说，以前已经写过一遍，要自己再拼写一遍SolrQuery，而且还有可能面临修改，那是绝对不行的。那么就自己再封装一层来生成SolrQuery吧，先根据业务重新定义query type，再解析生成。<br>根据业务上的搜索区分，可将条件分为以下几类：</p>
<pre><code>public enum SolrSearchFieldType {

/**
 * 精确值
 */
PRECISE,

/**
 * 模糊值
 */
FUZZY,

/**
 * 区间开始
 */
INTERVAL_BEGIN,

/**
 * 区间结束
 */
INTERVAL_END,

/**
 * 近期时间
 */
RECENT_TIME,

/**
 * start
 */
START,

/**
 * rows
 */
ROWS,

/**
 * sort
 */
SORT;

}
</code></pre><p>再创建注解</p>
<pre><code>@Retention(RetentionPolicy.RUNTIME)
@Target(value = { ElementType.FIELD })
public @interface SolrSearchField {

/**
 * 对应solr的Field
 * 
 * @return
 */
public String value();

/**
 * 查询属性类型
 * 
 * @return
 */
public SolrSearchFieldType type();

}
</code></pre><p>具体搜索条件dto加上自定义的注解  </p>
<pre><code>public class NewcrmUserInfoSearchDto {


@SolrSearchField(value = &quot;nick_s&quot;, type = SolrSearchFieldType.PRECISE)
private String nick;

 /**
 * 店铺等级
 */
@SolrSearchField(value = &quot;shopLevel_i&quot;, type = SolrSearchFieldType.INTERVAL_BEGIN)
private Integer shopLevelBegin;

@SolrSearchField(value = &quot;shopLevel_i&quot;, type = SolrSearchFieldType.INTERVAL_END)
private Integer shopLevelEnd;

/**
 * 对应当前页，需要根据pageSize计算出start
 */
@SolrSearchField(value = &quot;start&quot;, type = SolrSearchFieldType.START)
private Integer curPage;

@SolrSearchField(value = &quot;rows&quot;, type = SolrSearchFieldType.ROWS)
private Integer pageSize;

/**
 * 列名:desc或asc;列名:desc或asc;
 */
@SolrSearchField(value = &quot;sort&quot;, type = SolrSearchFieldType.SORT)
private String sort;
}
</code></pre><p>最后一步对dto进行反射获取注解，解析生成SolrQuery就哦了。</p>
<p>偷懒是程序猿高尚的美德。</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/09/01/solr搜索解析/" class="archive-article-date">
  	<time datetime="2015-08-31T16:11:12.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-09-01</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sdk/">sdk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/solr/">solr</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/搜索/">搜索</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-开发美丽说开放平台top版sdk" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/26/开发美丽说开放平台top版sdk/">开发美丽说开放平台top版sdk思路</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.背景<br>最近公司在做一个进货平台项目，可以让卖家从平台获取宝贝信息，将宝贝信息一键发布到各大卖家平台。如淘宝、阿里、京东、拍拍、苏宁等。</p>
<p>淘宝、阿里、京东、拍拍、苏宁平台都基本成熟，有sdk和云主机（都跟淘宝的top平台类似）</p>
<p>美丽说貌似刚起步，oauth体系，基本api已经开放，但是sdk没有发布出来。</p>
<p>接口形式都跟top平台类似。估计也是淘宝的团队出来的人开放的吧。</p>
<p>项目在急，总不能等着美丽说发布sdk吧，那么自己动手丰衣足食，将top的sdk迁移到美丽说好了。</p>
<p>2.开放平台概述<br>首先开放平台可分为3类对象：使用者，平台，isv<br>平台的使用者需要通过平台授权给isv(无论有偿无偿都需要订购isv的应用)，isv得到使用者的授权(sessionkey)后，可以通过该sessionkey在平台进行一些平台开放的操作。如对宝贝、订单进行管理或分析帮组使用者更高效的处理日常事务。</p>
<p>3.sdk 方案</p>
<p>3.1<br>oauth是全世界通用，先得到code，再得到token。封装2个请求轻松取得用户的授权。</p>
<p>3.2<br>api调用其实简单的来说就是一个http请求，将平台需要的参数拼接起来进行请求，然后平台收到请求进行处理，调用者接收平台的返回值进行再处理。</p>
<p>讲整个过程抽象出3个对象<br>request：请求包含请求的所有参数<br>response：请求后的结果<br>client：用request向平台请求并得到response</p>
<p>request －》 client －》response</p>
<p>3.3数据校验<br>平台的接口对参数有一些要求，所以在client在获得request时，调用接口前，要对特定的参数进行check，如果不符合平台接口要求，则直接抛出错误，防止不必要的api调用。所有参数都符合要求后，再根据平台的要求生产sign(平台对请求的安全性校验)一并传入api调用参数中。</p>
<p>完成以上所有步骤，美丽说的开放平台sdk便已经完成。<br>思想有了，其它平台也一样能轻松搞定。</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/08/26/开发美丽说开放平台top版sdk/" class="archive-article-date">
  	<time datetime="2015-08-26T14:59:12.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-08-26</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sdk/">sdk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/top/">top</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开放平台/">开放平台</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/美丽说/">美丽说</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-工作四年感想" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/23/工作四年感想/">工作四年感想</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>工作四年，从码农做到了主管。</p>
<p>能够单纯的编码是件多么快乐的事啊。</p>
<p>要设计开发文档，控制进度，要教育开发人员，还要跟其他部门沟通解决问题，工作时间自己开发的时间并不多。</p>
<p>难点：<br>1.开发人员很难成长，很多自己十几分钟写完的，让开发人员去，半天也弄不好，还出一大堆问题，关键是相同的问题。最后还得自己去完成，完全浪费时间。</p>
<p>2.招人难，培养起来了，又会跳槽。。。</p>
<p>3.其他部门干涉。</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/08/23/工作四年感想/" class="archive-article-date">
  	<time datetime="2015-08-23T15:13:12.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-08-23</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工作感想/">工作感想</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-mongodb安装" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/09/mongodb安装/">mongodb安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>wget <a href="https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-3.0.4.tgz" target="_blank" rel="external">https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-3.0.4.tgz</a></p>
<p>在/data/mongodb下新建mongodb.conf配置</p>
<p>port=27017<br>dbpath=/data/mongodb/data/<br>logpath=/data/mongodb/logs/mongodb.log<br>fork = true</p>
<p>至mongodb的bin目录下启动<br>~/itsoft/mongodb-linux-x86_64-rhel70-3.0.4/mongod –config /data/mongodb/mongodb.conf –nojournal</p>
<p>创建用户<br><a href="http://docs.mongodb.org/manual/reference/method/db.createUser/#create-administrative-user-with-roles" target="_blank" rel="external">http://docs.mongodb.org/manual/reference/method/db.createUser/#create-administrative-user-with-roles</a></p>
<p>use admin<br>db.createUser(<br>   {<br>     user: “sinno”,<br>     pwd: “clz619”,<br>     roles:<br>       [<br>         { role: “readWrite”, db: “sinno” }<br>       ]<br>   }<br>)</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/07/09/mongodb安装/" class="archive-article-date">
  	<time datetime="2015-07-09T15:54:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-07-09</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nosql/">nosql</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-redis安装及部署" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/09/redis安装及部署/">redis安装及部署</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://download.redis.io/releases/redis-3.0.2.tar.gz" target="_blank" rel="external">redis-3.0.2</a></p>
<p>wget <a href="http://download.redis.io/releases/redis-3.0.2.tar.gz" target="_blank" rel="external">http://download.redis.io/releases/redis-3.0.2.tar.gz</a></p>
<p>tar -xzvf redis-3.0.2.tar.gz</p>
<p>cd redis-3.0.2</p>
<p>make</p>
<p>在make成功以后，需要make test。在make test出现异常。<br>异常一：<br>couldn’t execute “tclsh8.5”: no such file or directory<br>异常原因：没有安装tcl<br>解决方案：yum install -y tcl。  </p>
<p>在make成功以后，会在src目录下多出一些可执行文件：redis-server，redis-cli等等。<br>方便期间用cp命令复制到usr目录下运行。<br>cp redis-server /usr/local/bin/<br>cp redis-cli /usr/local/bin/<br>然后新建目录，存放配置文件<br>mkdir /etc/redis<br>mkdir /var/redis<br>mkdir /var/redis/log<br>mkdir /var/redis/run<br>mkdir /var/redis/6379  </p>
<p>在redis解压根目录中找到配置文件模板，复制到如下位置。<br>cp redis.conf /etc/redis/6379.conf<br>通过vim命令修改<br>daemonize yes<br>pidfile /var/redis/run/redis_6379.pid<br>logfile /var/redis/log/redis_6379.log<br>dir /var/redis/6379<br>最后运行redis：<br>$ redis-server /etc/redis/6379.conf  </p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/07/09/redis安装及部署/" class="archive-article-date">
  	<time datetime="2015-07-09T15:39:22.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-07-09</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cache/">cache</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/">redis</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-zookeeper开源客户端curator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/09/zookeeper开源客户端curator/">zookeeper开源客户端curator</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://curator.apache.org/getting-started.html" target="_blank" rel="external">curator</a></p>
<p>Guava is to Java what Curator us to Zookeeper</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/07/09/zookeeper开源客户端curator/" class="archive-article-date">
  	<time datetime="2015-07-09T15:20:12.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-07-09</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/curator/">curator</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/zookeeper/">zookeeper</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分布式/">分布式</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-zookeeper部署与运行" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/09/zookeeper部署与运行/">zookeeper部署与运行</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>zookeeper有2种运行模式：集群模式和单机模式。</p>
<p>####集群模式<br>初次使用zookeeper，需要讲%ZK_HOME%/conf目录下的zoo_sample.cfg文件重命名为zoo.cfg，并且安装如下代码进行简单配置即可：  </p>
<blockquote>
<p>tickTime=2000<br>dataDir=/data/zookeeper/<br>clientPort=2181<br>initLimit=5<br>syncLimit=2<br>server.1=IP1:2888:3888<br>server.2=IP2:2888:3888<br>server.3=IP3:2888:3888  </p>
</blockquote>
<p>在集群模式下，集群中的每台机器都需要感知到整个集群是由哪几台机器组成的。<br>每一行代表一个机器的配置<br>server.id=IP1:2888:3888<br>其中，id被称为server id，用来标识该机器在集群中的机器序列。同时，在每台zookeeper机器上，我们都需要在数据目录（即dataDir参数指定的那个目录）下创建一个myid文件，该文件只有一行内容，并且是一个数字，即对应于每台机器的server id数字。</p>
<p>在zookeeper的设计中，集群中所有机器上的zoo.cfg文件的内容都应该是一致的。因此最好使用git把此文件管理起来，确保每个机器都能共享到一份相同的配置。</p>
<p>myid文件中只有一个数字，即一个server id。例如server.1的myid文件内容就是“1”。注意，请确保每个服务器的myid文件中的数字不同，并且和自己所在机器的zoo.cfg中server.id=host:port:port的id值一致。另外，id的范围是1~255</p>
<p>启动服务<br>sh zkServer.sh start</p>
<p>验证服务器</p>
<p>telenet 127.0.0.1 2181</p>
<p>stat</p>
<p>####单机模式</p>
<blockquote>
<p>tickTime=2000<br>dataDir=/data/zookeeper/<br>clientPort=2181<br>initLimit=5<br>syncLimit=2<br>server.1=IP1:2888:3888 </p>
</blockquote>
<p>在集群模式中，mode显示的是leader，也有可能是follower，他们用来标识当前服务器在集群中的角色。</p>
<p>在单机模式中，mode显示的是standalone</p>
<p>####伪集群</p>
<blockquote>
<p>tickTime=2000<br>dataDir=/data/zookeeper/<br>clientPort=2181<br>initLimit=5<br>syncLimit=2<br>server.1=IP1:2888:3888<br>server.2=IP2:2889:3889<br>server.3=IP3:2890:3890  </p>
</blockquote>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/07/09/zookeeper部署与运行/" class="archive-article-date">
  	<time datetime="2015-07-09T13:59:07.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-07-09</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/zookeeper/">zookeeper</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分布式/">分布式</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-centos7安装mysql5.6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/06/centos7安装mysql5.6/">centos7安装mysql5.6</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-下载mysql-rpm"><a href="#1-下载mysql-rpm" class="headerlink" title="1. 下载mysql rpm"></a>1. 下载mysql rpm</h4><p>进入mysql官网 <a href="http://dev.mysql.com/downloads/mysql/#downloads" target="_blank" rel="external">http://dev.mysql.com/downloads/mysql/#downloads</a> 下载</p>
<p>得到V76361-01.zip</p>
<h4 id="2-解压"><a href="#2-解压" class="headerlink" title="2. 解压"></a>2. 解压</h4><p>解压V76361-01.zip</p>
<blockquote>
<p>unzip V76361-01.zip</p>
</blockquote>
<p>获得文件<br>MySQL-client-advanced-5.6.25-1.el7.x86_64.rpm<br>MySQL-devel-advanced-5.6.25-1.el7.x86_64.rpm<br>MySQL-embedded-advanced-5.6.25-1.el7.x86_64.rpm<br>MySQL-server-advanced-5.6.25-1.el7.x86_64.rpm<br>MySQL-shared-advanced-5.6.25-1.el7.x86_64.rpm<br>MySQL-shared-compat-advanced-5.6.25-1.el7.x86_64.rpm<br>MySQL-test-advanced-5.6.25-1.el7.x86_64.rpm  </p>
<h4 id="3-检查是不是已经安装了mysql"><a href="#3-检查是不是已经安装了mysql" class="headerlink" title="3. 检查是不是已经安装了mysql"></a>3. 检查是不是已经安装了mysql</h4><blockquote>
<p>rpm -qa | grep -i mysql<br>##如果安装了先卸载旧的版本<br>yum -y remove mysql</p>
</blockquote>
<h4 id="4-安装"><a href="#4-安装" class="headerlink" title="4. 安装"></a>4. 安装</h4><blockquote>
<p>rpm -ivh MySQL-server-advanced-5.6.25-1.el7.x86_64.rpm<br>准备中…<br>################################# [100%]<br>file /usr/share/mysql/czech/errmsg.sys from install of MySQL-server-advanced-5.6.25-1.el7.x86_64 conflicts with file from package mariadb-libs-1:5.5.35-3.el7.x86_64 </p>
</blockquote>
<p>发现机器上已安装<a href="https://mariadb.org/" target="_blank" rel="external">mariadb</a> 造成了安装mysql冲突</p>
<p>卸载mariadb</p>
<blockquote>
<p>yum -y remove mariadb-libs-1:5.5.35-3.el7.x86_64  </p>
</blockquote>
<p>重新安装</p>
<blockquote>
<p>rpm -ivh MySQL-server-advanced-5.6.25-1.el7.x86_64.rpm<br>rpm -ivh MySQL-devel-advanced-5.6.25-1.el7.x86_64.rpm<br>rpm -ivh MySQL-client-advanced-5.6.25-1.el7.x86_64.rpm  </p>
</blockquote>
<p>安装完成…</p>
<p>安装后提示  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">A RANDOM PASSWORD HAS BEEN <span class="keyword">SET</span> <span class="keyword">FOR</span> THE MySQL root <span class="keyword">USER</span> !</div><div class="line">You will find that <span class="keyword">password</span> <span class="keyword">in</span> <span class="string">'/root/.mysql_secret'</span>.</div><div class="line"></div><div class="line">You must <span class="keyword">change</span> that <span class="keyword">password</span> <span class="keyword">on</span> your <span class="keyword">first</span> <span class="keyword">connect</span>,</div><div class="line"><span class="keyword">no</span> other <span class="keyword">statement</span> but <span class="string">'SET PASSWORD'</span> will be accepted.</div><div class="line">See the <span class="keyword">manual</span> <span class="keyword">for</span> the semantics <span class="keyword">of</span> the <span class="string">'password expired'</span> flag.</div><div class="line"></div><div class="line">Also, the <span class="keyword">account</span> <span class="keyword">for</span> the anonymous <span class="keyword">user</span> has been removed.</div><div class="line"></div><div class="line"><span class="keyword">In</span> addition, you can run:</div><div class="line"></div><div class="line">  /usr/<span class="keyword">bin</span>/mysql_secure_installation</div><div class="line"></div><div class="line">which will also give you the <span class="keyword">option</span> <span class="keyword">of</span> removing the <span class="keyword">test</span> database.</div><div class="line">This <span class="keyword">is</span> strongly recommended <span class="keyword">for</span> production servers.</div><div class="line"></div><div class="line">See the <span class="keyword">manual</span> <span class="keyword">for</span> more instructions.</div><div class="line"></div><div class="line">Please report <span class="keyword">any</span> problems <span class="keyword">at</span> <span class="keyword">http</span>://bugs.mysql.com/</div><div class="line"></div><div class="line">The latest information about MySQL <span class="keyword">is</span> available <span class="keyword">on</span> the web <span class="keyword">at</span></div><div class="line"></div><div class="line">  <span class="keyword">http</span>://www.mysql.com</div><div class="line"></div><div class="line">Support MySQL <span class="keyword">by</span> buying support/licenses <span class="keyword">at</span> <span class="keyword">http</span>://shop.mysql.com</div><div class="line"></div><div class="line"><span class="keyword">New</span> <span class="keyword">default</span> config <span class="keyword">file</span> was created <span class="keyword">as</span> /usr/my.cnf <span class="keyword">and</span></div><div class="line">will be used <span class="keyword">by</span> <span class="keyword">default</span> <span class="keyword">by</span> the <span class="keyword">server</span> <span class="keyword">when</span> you <span class="keyword">start</span> it.</div><div class="line">You may edit this <span class="keyword">file</span> <span class="keyword">to</span> <span class="keyword">change</span> <span class="keyword">server</span> <span class="keyword">settings</span></div></pre></td></tr></table></figure>
<p>mysql自动创建了root并且随机生成了它的密码。<br>创建了默认的配置文件/usr/my.cn</p>
<h4 id="5-账号配置"><a href="#5-账号配置" class="headerlink" title="5. 账号配置"></a>5. 账号配置</h4><p>获取随机的密码</p>
<blockquote>
<p>cat /root/.mysql_secret  </p>
</blockquote>
<p>启动mysql</p>
<blockquote>
<p>service mysql start  </p>
</blockquote>
<p>重置密码且修改基本配置</p>
<blockquote>
<p>/usr/bin/mysql_secure_installation  </p>
</blockquote>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">NOTE: RUNNING ALL PARTS <span class="keyword">OF</span> THIS SCRIPT <span class="keyword">IS</span> RECOMMENDED <span class="keyword">FOR</span> ALL MySQL</div><div class="line">      SERVERS <span class="keyword">IN</span> PRODUCTION USE!  PLEASE READ <span class="keyword">EACH</span> <span class="keyword">STEP</span> CAREFULLY!</div><div class="line"></div><div class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> log <span class="keyword">into</span> MySQL <span class="keyword">to</span> secure it, we<span class="comment">'ll need the current</span></div><div class="line">password <span class="keyword">for</span> the root user.  <span class="keyword">If</span> you<span class="comment">'ve just installed MySQL, and</span></div><div class="line">you haven<span class="comment">'t set the root password yet, the password will be blank,</span></div><div class="line">so you should just press enter here.</div><div class="line"></div><div class="line">Enter current password <span class="keyword">for</span> root (enter <span class="keyword">for</span> none): </div><div class="line">OK, successfully used password, moving <span class="keyword">on</span>...</div><div class="line"></div><div class="line">Setting the root password ensures that nobody can log <span class="keyword">into</span> the MySQL</div><div class="line">root user without the proper authorisation.</div><div class="line"></div><div class="line">You already have a root password <span class="keyword">set</span>, so you can safely answer <span class="comment">'n'.</span></div><div class="line"></div><div class="line">Change the root password? [Y/n] Y</div><div class="line"><span class="keyword">New</span> password: </div><div class="line">Re-enter <span class="keyword">new</span> password: </div><div class="line">Password updated successfully!</div><div class="line">Reloading privilege tables..</div><div class="line"> ... Success!</div><div class="line"></div><div class="line"><span class="keyword">By</span> <span class="keyword">default</span>, a MySQL installation has an anonymous user, allowing anyone</div><div class="line"><span class="keyword">to</span> log <span class="keyword">into</span> MySQL without having <span class="keyword">to</span> have a user account created <span class="keyword">for</span></div><div class="line">them.  This <span class="keyword">is</span> intended only <span class="keyword">for</span> testing, <span class="keyword">and</span> <span class="keyword">to</span> make the installation</div><div class="line">go a bit smoother.  You should remove them before moving <span class="keyword">into</span> a</div><div class="line">production environment.</div><div class="line"></div><div class="line">Remove anonymous users? [Y/n] Y</div><div class="line"> ... Success!</div><div class="line"></div><div class="line">Normally, root should only be allowed <span class="keyword">to</span> connect <span class="keyword">from</span> <span class="comment">'localhost'.  This</span></div><div class="line">ensures that someone cannot guess at the root password <span class="keyword">from</span> the network.</div><div class="line"></div><div class="line">Disallow root login remotely? [Y/n] y</div><div class="line"> ... Success!</div><div class="line"></div><div class="line"><span class="keyword">By</span> <span class="keyword">default</span>, MySQL comes <span class="keyword">with</span> a database named <span class="comment">'test' that anyone can</span></div><div class="line">access.  This <span class="keyword">is</span> also intended only <span class="keyword">for</span> testing, <span class="keyword">and</span> should be removed</div><div class="line">before moving <span class="keyword">into</span> a production environment.</div><div class="line"></div><div class="line">Remove test database <span class="keyword">and</span> access <span class="keyword">to</span> it? [Y/n] y</div><div class="line"> - Dropping test database...</div><div class="line"> ... Success!</div><div class="line"> - Removing privileges <span class="keyword">on</span> test database...</div><div class="line"> ... Success!</div><div class="line"></div><div class="line">Reloading the privilege tables will ensure that all changes made so far</div><div class="line">will <span class="keyword">take</span> effect immediately.</div><div class="line"></div><div class="line">Reload privilege tables now? [Y/n] y</div><div class="line"> ... Success!</div><div class="line"></div><div class="line">All done!  <span class="keyword">If</span> you<span class="comment">'ve completed all of the above steps, your MySQL</span></div><div class="line">installation should now be secure.</div><div class="line"></div><div class="line">Thanks <span class="keyword">for</span> <span class="keyword">using</span> MySQL!</div><div class="line"></div><div class="line">Cleaning up...</div></pre></td></tr></table></figure>
<h4 id="6-登录"><a href="#6-登录" class="headerlink" title="6. 登录"></a>6. 登录</h4><blockquote>
<p>mysql -u root -p密码 -h ip地址 -P3306 数据库名</p>
</blockquote>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">Warning: <span class="keyword">Using</span> a password <span class="keyword">on</span> the command line <span class="keyword">interface</span> can be insecure.</div><div class="line">Welcome <span class="keyword">to</span> the MySQL monitor.  Commands <span class="keyword">end</span> <span class="keyword">with</span> ; <span class="keyword">or</span> \g.</div><div class="line">Your MySQL connection id <span class="keyword">is</span> <span class="number">13</span></div><div class="line">Server version: <span class="number">5.6</span>.<span class="number">25</span>-enterprise-commercial-advanced MySQL Enterprise Server - Advanced Edition (Commercial)</div><div class="line"></div><div class="line">Copyright (c) <span class="number">2000</span>, <span class="number">2015</span>, Oracle <span class="keyword">and</span>/<span class="keyword">or</span> its affiliates. All rights reserved.</div><div class="line"></div><div class="line">Oracle <span class="keyword">is</span> a registered trademark <span class="keyword">of</span> Oracle Corporation <span class="keyword">and</span>/<span class="keyword">or</span> its</div><div class="line">affiliates. Other names may be trademarks <span class="keyword">of</span> their respective</div><div class="line">owners.</div><div class="line"></div><div class="line"><span class="keyword">Type</span> <span class="string">'help;'</span> <span class="keyword">or</span> <span class="string">'\h'</span> <span class="keyword">for</span> help. <span class="keyword">Type</span> <span class="string">'\c'</span> <span class="keyword">to</span> clear the current input statement.</div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure>
<h4 id="7-MySql开启远程用户登录"><a href="#7-MySql开启远程用户登录" class="headerlink" title="7.MySql开启远程用户登录"></a>7.MySql开启远程用户登录</h4><p>　　GRANT ALL PRIVILEGES ON <em>.</em> TO ‘root’@’%’ IDENTIFIED BY ‘huawei’ WITH GRANT OPTION; FLUSH PRIVILEGES;</p>
<p>　　执行上面的命令后，重启Mysql就行了。~~~</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/07/06/centos7安装mysql5.6/" class="archive-article-date">
  	<time datetime="2015-07-05T16:01:16.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-07-06</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/centos/">centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/运维/">运维</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-tomcat搭建session共享" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/05/tomcat搭建session共享/">tomcat搭建session共享</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-背景"><a href="#1-背景" class="headerlink" title="1. 背景"></a>1. 背景</h4><p>当前项目，使用一台服务器无法支撑住现有的访问量，需要使用多台服务器进行负载访问。</p>
<h4 id="2-安装"><a href="#2-安装" class="headerlink" title="2. 安装"></a>2. 安装</h4><p>#####安装memcached<br>安装memcached前提条件</p>
<p>安装libevent</p>
<p>wget<br><a href="https://github.com/downloads/libevent/libevent/libevent-1.4.14b-stable.tar.gz" target="_blank" rel="external">https://github.com/downloads/libevent/libevent/libevent-1.4.14b-stable.tar.gz</a></p>
<p>1.<br>tar -xzvf libevent-1.4.14b-stable.tar.gz</p>
<p>2.<br>cd libevent-1.4.14b-stable</p>
<p>3.<br>./configure</p>
<p>4.<br>make</p>
<p>5.<br>sudo make install</p>
<p>安装memcached  </p>
<p>wget <a href="http://www.memcached.org/files/memcached-1.4.24.tar.gz" target="_blank" rel="external">http://www.memcached.org/files/memcached-1.4.24.tar.gz</a></p>
<p>1.<br>tar -xzvf<br>2.<br>./configure<br>3.<br>make<br>4.<br>sudo make install</p>
<h5 id="启动memcached"><a href="#启动memcached" class="headerlink" title="启动memcached"></a>启动memcached</h5><p>/usr/local/bin/memcached -d -m 64 -u root -l 127.0.0.1 -p 11211 -c 32 -P /tmp/memcached.pid  </p>
<p>/usr/local/bin/memcached -d -m 64 -u root -l 127.0.0.1 -p 11212 -c 32 -P /tmp/memcached.pid  </p>
<p>参数含义：<br>-d 表示启动一个守护进程<br>-m 指定分配给memcache的内存数量，单位上mb，这里指定的是10mb<br>-u 指定运行memcache的用户，这里指定的是root<br>-l 指定监听的服务器的IP地址<br>-p 设置memcache监听的端口，这里指定的是11211<br>-c 指定最大允许的并非连接数，这里设置为32<br>-P 指定memcache的pid文件保存的位置  </p>
<p>#####关闭memcache服务</p>
<p>kill ‘cat /tmp/memcached.pid’  </p>
<p>#####安装配置tomcat<br>wget <a href="http://mirrors.cnnic.cn/apache/tomcat/tomcat-7/v7.0.63/bin/apache-tomcat-7.0.63.tar.gz" target="_blank" rel="external">http://mirrors.cnnic.cn/apache/tomcat/tomcat-7/v7.0.63/bin/apache-tomcat-7.0.63.tar.gz</a>  </p>
<p>tar -xzvf apache-tomcat-7.0.63.tar.gz  </p>
<p>cp -ri  apache-tomcat-7.0.63 /data/apache-tomcat-7.0.63</p>
<p>cd /data</p>
<p>cp -ri  apache-tomcat-7.0.63 tomcat-sinno01</p>
<p>cp -ri  apache-tomcat-7.0.63 tomcat-sinno02</p>
<p>修改配置</p>
<h5 id="nginx安装"><a href="#nginx安装" class="headerlink" title="nginx安装"></a>nginx安装</h5><p>wget <a href="http://nginx.org/download/nginx-1.9.2.tar.gz" target="_blank" rel="external">http://nginx.org/download/nginx-1.9.2.tar.gz</a></p>
<p>tar -xzvf nginx-1.9.2.tar.gz</p>
<p>.configure</p>
<p>make &amp;&amp; make install</p>
<h5 id="配置msm"><a href="#配置msm" class="headerlink" title="配置msm"></a>配置msm</h5><p><a href="https://code.google.com/p/memcached-session-manager/wiki/SetupAndConfiguration" target="_blank" rel="external">https://code.google.com/p/memcached-session-manager/wiki/SetupAndConfiguration</a></p>
<p><a href="http://chenzhou123520.iteye.com/blog/1650212" target="_blank" rel="external">http://chenzhou123520.iteye.com/blog/1650212</a></p>
<p>tomcat6配置</p>
<p>vi conf/context.xml</p>
<manager classname="de.javakaffee.web.msm.MemcachedBackupSessionManager" memcachednodes="sinno01:11211" username="sinno" password="sinno" memcachedprotocol="binary" sticky="true" sessionbackupasync="true" sessionbackuptimeout="2000" storagekeyprefix="static:session_sinno" requesturiignorepattern=".*\.(gif|jpg|jpeg|png|bmp|swf|js|css|html|htm|xml|json)$" transcoderfactoryclass="de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory">

<p>vi conf/server.xml</p>
<connector emptysessionpath="true">


<h5 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h5><pre><code>public class SessionUI extends Controller {  
   public static void setSessionValue(String k, String v) {  
       session.put(k, v);  
       renderJSON(Play.id + &quot; set k:&quot; + k + &quot;,v:&quot; + v);  
   }  
   public static void getSessionValue(String k) {
       String v = session.get(k);
       renderJSON(Play.id + &quot; get k:&quot; + k + &quot;,v:&quot; + v);
   }  

   public static void getSessionId() {
       renderJSON(Play.id + &quot; sessionId:&quot; + session.getId());
   }
}
</code></pre><p><a href="http://sinno/sessionui/setSessionValue?k=aa&amp;v=test" target="_blank" rel="external">http://sinno/sessionui/setSessionValue?k=aa&amp;v=test</a><br>页面返回：<br>sinno01 set k:aa,v:test  </p>
<p>不断刷新页面 会在下面2种返回数据替换<br><a href="http://sinno/sessionui/getSessionValue?k=aa" target="_blank" rel="external">http://sinno/sessionui/getSessionValue?k=aa</a><br>页面返回：<br>sinno01 get k:aa,v:test  </p>
<p><a href="http://sinno/sessionui/getSessionValue?k=aa" target="_blank" rel="external">http://sinno/sessionui/getSessionValue?k=aa</a><br>页面返回：<br>sinno02 get k:aa,v:test  </p>
<p><a href="http://www.douban.com/note/325861884/?type=like" target="_blank" rel="external">使用nginx做负载均衡造成的session共享问题</a><br><a href="http://blog.yemou.net/article/query/info/tytfjhfascvhzxcyt158" target="_blank" rel="external">Nginx 的线程池与性能剖析</a></p>
<p>为了防止nginx不固定随机分配服务器  </p>
<p>upstream dazhe.ciaosir.com {<br>           server sinno01:9000;<br>           server sinno02:9000;<br>           ip_hash;  </p>
<pre><code>   #根据iphash固定服务器  
}
</code></pre><p>关掉sinno01还可以继续访问</p>
<p>session还能取得</p>
<p>session共享成功</p>
<p>####说明</p>
<p>storageKeyPrefix (since 1.8.0, optional, default webappVersion)</p>
<pre><code>Allows to configure a prefix that&apos;s added to the session id when a session is stored in memcached. This is useful if there are multiple webapps sharing the same session id, e.g. because contexts are configured with sessionCookiePath=&quot;/&quot; (tomcat 7, or emptySessionPath=&quot;true&quot; in tomcat 6) 

When tomcats parallel deployment is used there are also multiple webapps sharing the same session id. This is supported by default, because the default value (if storageKeyPrefix is not set explicitely) is webappVersion, so that the webapp version is used as prefix for the session id / key in memcached. 

The storageKeyPrefix attribute supports both a static prefix (static:somePrefix) and dynamic values (host, context, webappVersion), multiple values can be specified seperated by comma. 

Here are some examples that demonstrate which config would create which storage key (for a session id &quot;foo&quot; with context path &quot;ctxt&quot; and host &quot;hst&quot;):

    static:x -&gt; x_foo
    host -&gt; hst_foo
    host.hash -&gt; e93c085e_foo
    context -&gt; ctxt_foo
    context.hash -&gt; 45e6345f_foo
    host,context -&gt; hst:ctxt_foo
    webappVersion -&gt; 001_foo
    host.hash,context.hash,webappVersion -&gt; e93c085e:45e6345f:001_foo 
</code></pre><p>Aug 2, 2015 11:50:16 PM de.javakaffee.web.msm.MemcachedSessionService startInternal<br>INFO: MemcachedSessionService starts initialization… (configured nodes definition sinno01:11211, failover nodes null)<br>Aug 2, 2015 11:50:16 PM org.apache.catalina.core.StandardContext start<br>SEVERE: Error manager.start()<br>java.lang.IllegalArgumentException: Unsupported config token session_sinno<br>at de.javakaffee.web.msm.StorageKeyFormat$PrefixTokenFactory.parse(StorageKeyFormat.java:121)<br>at de.javakaffee.web.msm.StorageKeyFormat.of(StorageKeyFormat.java:79)<br>at de.javakaffee.web.msm.MemcachedSessionService.createMemcachedNodesManager(MemcachedSessionService.java:479)<br>at de.javakaffee.web.msm.MemcachedSessionService.startInternal(MemcachedSessionService.java:423)<br>at de.javakaffee.web.msm.MemcachedBackupSessionManager.startInternal(MemcachedBackupSessionManager.java:134)<br>at de.javakaffee.web.msm.MemcachedBackupSessionManager.start(MemcachedBackupSessionManager.java:647)<br>at org.apache.catalina.core.StandardContext.start(StandardContext.java:4714)<br>at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)<br>at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)<br>at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)<br>at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)<br>at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)<br>at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)<br>at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)<br>at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)<br>at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)<br>at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)<br>at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)<br>at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)<br>at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)<br>at org.apache.catalina.core.StandardService.start(StandardService.java:525)<br>at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)<br>at org.apache.catalina.startup.Catalina.start(Catalina.java:595)<br>at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br>at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br>at java.lang.reflect.Method.invoke(Method.java:597)<br>at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)<br>at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)<br>Aug 2, 2015 11:50:16 PM org.apache.catalina.core.StandardContext start<br>SEVERE: Context [] startup failed due to previous errors<br>Aug 2, 2015 11:50:16 PM de.javakaffee.web.msm.MemcachedBackupSessionManager stop<br>INFO: Removing sessions from local session map.<br>Aug 2, 2015 11:50:16 PM de.javakaffee.web.msm.MemcachedSessionService shutdown<br>INFO: Stopping services.<br>Aug 2, 2015 11:50:16 PM org.apache.catalina.core.StandardContext start<br>SEVERE: Exception during cleanup after start failed<br>java.lang.NullPointerException<br>at org.apache.catalina.core.StandardPipeline.removeValve(StandardPipeline.java:528)<br>at de.javakaffee.web.msm.MemcachedSessionService.shutdown(MemcachedSessionService.java:388)<br>at de.javakaffee.web.msm.MemcachedBackupSessionManager.stop(MemcachedBackupSessionManager.java:680)<br>at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4882)<br>at org.apache.catalina.core.StandardContext.start(StandardContext.java:4750)<br>at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)<br>at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)<br>at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)<br>at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)<br>at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)<br>at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)<br>at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)<br>at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)<br>at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)<br>at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)<br>at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)<br>at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)<br>at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)<br>at org.apache.catalina.core.StandardService.start(StandardService.java:525)<br>at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)<br>at org.apache.catalina.startup.Catalina.start(Catalina.java:595)<br>at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br>at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br>at java.lang.reflect.Method.invoke(Method.java:597)<br>at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)<br>at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)<br>Aug 2, 2015 11:50:16 PM org.apache.tomcat.util.modeler.Registry registerComponent<br>SEVERE: Null component Catalina:type=JspMonitor,name=jsp,WebModule=//localhost/,J2EEApplication=none,J2EEServer=none<br>Aug 2, 2015 11:50:16 PM org.apache.catalina.core.ContainerBase stop<br>INFO: Container org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/].[jsp] has not been started<br>Aug 2, 2015 11:50:16 PM org.apache.catalina.core.ContainerBase stop<br>INFO: Container org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/].[default] has not been started<br>Aug 2, 2015 11:50:16 PM org.apache.catalina.core.ContainerBase stop<br>INFO: Container org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/].[play] has not been started<br>Aug 2, 2015 11:50:16 PM org.apache.catalina.core.ContainerBase addChildInternal<br>SEVERE: ContainerBase.addChild: start:<br>LifecycleException:  Manager has not yet been started<br>at de.javakaffee.web.msm.MemcachedBackupSessionManager.stop(MemcachedBackupSessionManager.java:662)<br>at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4882)<br>at org.apache.catalina.core.StandardContext.start(StandardContext.java:4778)<br>at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)<br>at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)<br>at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)<br>at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)<br>at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)<br>at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)<br>at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)<br>at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)<br>at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)<br>at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)<br>at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)<br>at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)<br>at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)<br>at org.apache.catalina.core.StandardService.start(StandardService.java:525)<br>at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)<br>at org.apache.catalina.startup.Catalina.start(Catalina.java:595)<br>at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br>at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br>at java.lang.reflect.Method.invoke(Method.java:597)<br>at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)<br>at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)</p>
<p> 2015-08-02 23:53:34.483 INFO net.spy.memcached.auth.AuthThread:  Authenticated to sinno01/10.157.200.1:11211<br>Aug 2, 2015 11:53:34 PM de.javakaffee.web.msm.MemcachedSessionService startInternal<br>INFO: MemcachedSessionService starts initialization… (configured nodes definition sinno01:11211, failover nodes null)<br> 2015-08-02 23:53:34.687 INFO net.spy.memcached.MemcachedConnection:  Added {QA sa=c9ac5bbc8d844776.m.cnhzalicm10pub001.ocs.aliyuncs.com/10.157.200.1:11211, #Rops=0, #Wops=0, #iq=0, topRop=null, topWop=null, toWrite=0, interested=0} to connect queue<br>Aug 2, 2015 11:53:34 PM de.javakaffee.web.msm.RequestTrackingHostValve <init><br>INFO: Setting ignorePattern to .*.(gif|jpg|jpeg|png|bmp|swf|js|css|html|htm|xml|json)$<br>Aug 2, 2015 11:53:34 PM de.javakaffee.web.msm.MemcachedSessionService setLockingMode<br>INFO: Setting lockingMode to null<br>Aug 2, 2015 11:53:34 PM de.javakaffee.web.msm.MemcachedSessionService createTranscoderFactory<br>INFO: Creating transcoder factory de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory<br>Aug 2, 2015 11:53:34 PM de.javakaffee.web.msm.serializer.kryo.KryoTranscoder <init><br>INFO: Starting with initialBufferSize 102400, maxBufferSize 2048000 and defaultSerializerFactory de.javakaffee.web.msm.serializer.kryo.ReferenceFieldSerializerFactory<br>Aug 2, 2015 11:53:34 PM de.javakaffee.web.msm.MemcachedSessionService startInternal<br>INFO: ——–</init></init></p>
<ul>
<li>MemcachedSessionService finished initialization:</li>
<li>sticky: true</li>
<li>operation timeout: 1000</li>
<li>node ids: []</li>
<li>failover node ids: []</li>
<li>storage key prefix: session<em>sinno</em></li>
</ul>
</connector></manager>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/07/05/tomcat搭建session共享/" class="archive-article-date">
  	<time datetime="2015-07-05T15:35:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-07-05</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/msm/">msm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/session共享/">session共享</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tomcat/">tomcat</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分布式/">分布式</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-shell远程脚本" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/05/shell远程脚本/">shell远程脚步</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-场景"><a href="#1-场景" class="headerlink" title="1. 场景"></a>1. 场景</h4><p>mac为本地主机，用于blog编辑<br>sinno01为远程服务器（搭建了git，hexo）用于生成blog的静态页面及发布。</p>
<p>现在需要在mac直接操作sinno01发布在mac修改的blog</p>
<h4 id="2-编写服务器sinno01部署脚步"><a href="#2-编写服务器sinno01部署脚步" class="headerlink" title="2. 编写服务器sinno01部署脚步"></a>2. 编写服务器sinno01部署脚步</h4><blockquote>
<p>vi /root/deploy_blog.sh<br>#cd至blog目录<br>cd blog<br>#更新blog文件<br>git pull<br>#hexo生成静态文件并发布<br>hexo g –d  </p>
</blockquote>
<h4 id="3-客户端mac部署脚步"><a href="#3-客户端mac部署脚步" class="headerlink" title="3. 客户端mac部署脚步"></a>3. 客户端mac部署脚步</h4><blockquote>
<p>vi ~/tool/deploy_blog.sh<br>cd ~/learn/git/blog<br>#将客户端mac修改的内容提交至github<br>git add .<br>git commit -am ‘add msg’<br>git push<br>#远程操作sinno01的部署脚本<br>ssh root@sinno01 “/bin/bash /root/deploy_blog.sh”  </p>
</blockquote>
<h4 id="4-客户端调用"><a href="#4-客户端调用" class="headerlink" title="4. 客户端调用"></a>4. 客户端调用</h4><blockquote>
<p>sh ~/tool/deploy_blog.sh  </p>
</blockquote>
<p>mac新增加的文件就这样发布了</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/07/05/shell远程脚本/" class="archive-article-date">
  	<time datetime="2015-07-05T14:40:53.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-07-05</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 lizhong.chen
    	</div>
    </div>
  </div>
</footer>

    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/"
	}
</script>

<script src="/./main.js"></script>





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/Aware/" style="font-size: 10px;">Aware</a> <a href="/tags/Class/" style="font-size: 10px;">Class</a> <a href="/tags/ContextLoaderListener/" style="font-size: 10px;">ContextLoaderListener</a> <a href="/tags/IDEA/" style="font-size: 10px;">IDEA</a> <a href="/tags/aop/" style="font-size: 11.67px;">aop</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/camel，模版/" style="font-size: 10px;">camel，模版</a> <a href="/tags/centos/" style="font-size: 16.67px;">centos</a> <a href="/tags/curator/" style="font-size: 10px;">curator</a> <a href="/tags/dead-walker/" style="font-size: 11.67px;">dead walker</a> <a href="/tags/docker/" style="font-size: 16.67px;">docker</a> <a href="/tags/elrepo/" style="font-size: 10px;">elrepo</a> <a href="/tags/flume/" style="font-size: 10px;">flume</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gitolite/" style="font-size: 10px;">gitolite</a> <a href="/tags/hexo/" style="font-size: 11.67px;">hexo</a> <a href="/tags/http/" style="font-size: 13.33px;">http</a> <a href="/tags/ioc/" style="font-size: 10px;">ioc</a> <a href="/tags/javaWeb/" style="font-size: 11.67px;">javaWeb</a> <a href="/tags/jvm/" style="font-size: 20px;">jvm</a> <a href="/tags/kafka/" style="font-size: 10px;">kafka</a> <a href="/tags/linux/" style="font-size: 13.33px;">linux</a> <a href="/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/tags/msm/" style="font-size: 10px;">msm</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/nosql/" style="font-size: 10px;">nosql</a> <a href="/tags/osgi/" style="font-size: 10px;">osgi</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/sdk/" style="font-size: 11.67px;">sdk</a> <a href="/tags/session共享/" style="font-size: 10px;">session共享</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/sinno/" style="font-size: 15px;">sinno</a> <a href="/tags/solr/" style="font-size: 10px;">solr</a> <a href="/tags/spring/" style="font-size: 13.33px;">spring</a> <a href="/tags/srcum/" style="font-size: 10px;">srcum</a> <a href="/tags/sts/" style="font-size: 10px;">sts</a> <a href="/tags/thread/" style="font-size: 11.67px;">thread</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/top/" style="font-size: 10px;">top</a> <a href="/tags/uml/" style="font-size: 10px;">uml</a> <a href="/tags/virgo/" style="font-size: 10px;">virgo</a> <a href="/tags/xsd/" style="font-size: 18.33px;">xsd</a> <a href="/tags/xsd-facets/" style="font-size: 10px;">xsd,facets</a> <a href="/tags/xsd-schema-definition/" style="font-size: 10px;">xsd,schema definition</a> <a href="/tags/zookeeper/" style="font-size: 11.67px;">zookeeper</a> <a href="/tags/互联网/" style="font-size: 10px;">互联网</a> <a href="/tags/人性/" style="font-size: 10px;">人性</a> <a href="/tags/仓库/" style="font-size: 10px;">仓库</a> <a href="/tags/你会爱我多久/" style="font-size: 10px;">你会爱我多久</a> <a href="/tags/内核/" style="font-size: 10px;">内核</a> <a href="/tags/分布式/" style="font-size: 13.33px;">分布式</a> <a href="/tags/动态域名/" style="font-size: 10px;">动态域名</a> <a href="/tags/命令模式/" style="font-size: 10px;">命令模式</a> <a href="/tags/图形模式/" style="font-size: 10px;">图形模式</a> <a href="/tags/容器/" style="font-size: 10px;">容器</a> <a href="/tags/将来的那个人/" style="font-size: 10px;">将来的那个人</a> <a href="/tags/工作感想/" style="font-size: 10px;">工作感想</a> <a href="/tags/开放平台/" style="font-size: 10px;">开放平台</a> <a href="/tags/引擎/" style="font-size: 10px;">引擎</a> <a href="/tags/张小娴/" style="font-size: 13.33px;">张小娴</a> <a href="/tags/忠忠闲谈/" style="font-size: 11.67px;">忠忠闲谈</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/时间/" style="font-size: 10px;">时间</a> <a href="/tags/架构/" style="font-size: 15px;">架构</a> <a href="/tags/源码/" style="font-size: 11.67px;">源码</a> <a href="/tags/现在想见你/" style="font-size: 10px;">现在想见你</a> <a href="/tags/相逢/" style="font-size: 13.33px;">相逢</a> <a href="/tags/美丽说/" style="font-size: 10px;">美丽说</a> <a href="/tags/规则/" style="font-size: 10px;">规则</a> <a href="/tags/负载均衡/" style="font-size: 10px;">负载均衡</a> <a href="/tags/运维/" style="font-size: 10px;">运维</a> <a href="/tags/追求/" style="font-size: 10px;">追求</a> <a href="/tags/金融/" style="font-size: 10px;">金融</a> <a href="/tags/镜像/" style="font-size: 13.33px;">镜像</a>
    			</div>
    	</section>
    

    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">圆梦此生无憾</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>